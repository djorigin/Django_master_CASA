{% extends "aircraft/base.html" %}
{% load i18n %}

{% block title %}{{ action }} Aircraft Type - {{ block.super }}{% endblock %}

{% block breadcrumb_extra %}
<span>></span>
<a href="{% url 'aircraft:aircraft_type_list' %}">Aircraft Types</a>
<span>></span>
<span>{{ action }}</span>
{% endblock %}

{% block page_title %}{{ action }} Aircraft Type{% endblock %}
{% block page_subtitle %}
    {% if action == "Create" %}
        Add a new aircraft type to the system
    {% else %}
        Update aircraft type information
    {% endif %}
{% endblock %}

{% block page_actions %}
<a href="{% url 'aircraft:aircraft_type_list' %}" class="btn btn-outline">
    <i class="fas fa-arrow-left"></i> Back to Types
</a>
{% if action == "Update" %}
<a href="{% url 'aircraft:aircraft_type_detail' aircraft_type.pk %}" class="btn btn-secondary">
    <i class="fas fa-eye"></i> View Details
</a>
{% endif %}
{% endblock %}

{% block content %}
<div class="form-container">
    <form method="post" class="aircraft-form">
        {% csrf_token %}
        
        <!-- Basic Information -->
        <div class="form-section">
            <h3>Basic Information</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.name.id_for_label }}">{{ form.name.label }}*</label>
                    {{ form.name }}
                    {% if form.name.errors %}
                        <div class="form-errors">
                            {% for error in form.name.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.manufacturer.id_for_label }}">{{ form.manufacturer.label }}*</label>
                    {{ form.manufacturer }}
                    {% if form.manufacturer.errors %}
                        <div class="form-errors">
                            {% for error in form.manufacturer.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.model.id_for_label }}">{{ form.model.label }}*</label>
                    {{ form.model }}
                    {% if form.model.errors %}
                        <div class="form-errors">
                            {% for error in form.model.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- CASA Classification -->
        <div class="form-section">
            <h3>CASA Classification</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.category.id_for_label }}">{{ form.category.label }}*</label>
                    {{ form.category }}
                    {% if form.category.errors %}
                        <div class="form-errors">
                            {% for error in form.category.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <small class="form-help">CASA Part 101 operational category</small>
                </div>
                
                <div class="form-group">
                    <label for="{{ form.operation_type.id_for_label }}">{{ form.operation_type.label }}*</label>
                    {{ form.operation_type }}
                    {% if form.operation_type.errors %}
                        <div class="form-errors">
                            {% for error in form.operation_type.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group checkbox-group">
                    <div class="checkbox-container">
                        {{ form.certification_required }}
                        <label for="{{ form.certification_required.id_for_label }}">{{ form.certification_required.label }}</label>
                    </div>
                    {% if form.certification_required.errors %}
                        <div class="form-errors">
                            {% for error in form.certification_required.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Technical Specifications -->
        <div class="form-section">
            <h3>Technical Specifications</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.maximum_takeoff_weight.id_for_label }}">{{ form.maximum_takeoff_weight.label }}*</label>
                    {{ form.maximum_takeoff_weight }}
                    {% if form.maximum_takeoff_weight.errors %}
                        <div class="form-errors">
                            {% for error in form.maximum_takeoff_weight.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.maximum_operating_height.id_for_label }}">{{ form.maximum_operating_height.label }}*</label>
                    {{ form.maximum_operating_height }}
                    {% if form.maximum_operating_height.errors %}
                        <div class="form-errors">
                            {% for error in form.maximum_operating_height.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.maximum_speed.id_for_label }}">{{ form.maximum_speed.label }}</label>
                    {{ form.maximum_speed }}
                    {% if form.maximum_speed.errors %}
                        <div class="form-errors">
                            {% for error in form.maximum_speed.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div></div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.endurance_hours.id_for_label }}">{{ form.endurance_hours.label }}</label>
                    {{ form.endurance_hours }}
                    {% if form.endurance_hours.errors %}
                        <div class="form-errors">
                            {% for error in form.endurance_hours.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.payload_capacity.id_for_label }}">{{ form.payload_capacity.label }}</label>
                    {{ form.payload_capacity }}
                    {% if form.payload_capacity.errors %}
                        <div class="form-errors">
                            {% for error in form.payload_capacity.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.typical_cruise_speed.id_for_label }}">{{ form.typical_cruise_speed.label }}</label>
                    {{ form.typical_cruise_speed }}
                    {% if form.typical_cruise_speed.errors %}
                        <div class="form-errors">
                            {% for error in form.typical_cruise_speed.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Compliance Information -->
        <div class="form-section">
            <h3>Compliance Information</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.casa_type_certificate.id_for_label }}">{{ form.casa_type_certificate.label }}</label>
                    {{ form.casa_type_certificate }}
                    {% if form.casa_type_certificate.errors %}
                        <div class="form-errors">
                            {% for error in form.casa_type_certificate.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.casa_approval_reference.id_for_label }}">{{ form.casa_approval_reference.label }}</label>
                    {{ form.casa_approval_reference }}
                    {% if form.casa_approval_reference.errors %}
                        <div class="form-errors">
                            {% for error in form.casa_approval_reference.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group checkbox-group">
                    <div class="checkbox-container">
                        {{ form.excluded_category_compliant }}
                        <label for="{{ form.excluded_category_compliant.id_for_label }}">{{ form.excluded_category_compliant.label }}</label>
                    </div>
                    {% if form.excluded_category_compliant.errors %}
                        <div class="form-errors">
                            {% for error in form.excluded_category_compliant.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group checkbox-group">
                    <div class="checkbox-container">
                        {{ form.flight_manual_required }}
                        <label for="{{ form.flight_manual_required.id_for_label }}">{{ form.flight_manual_required.label }}</label>
                    </div>
                    {% if form.flight_manual_required.errors %}
                        <div class="form-errors">
                            {% for error in form.flight_manual_required.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group checkbox-group">
                    <div class="checkbox-container">
                        {{ form.maintenance_manual_required }}
                        <label for="{{ form.maintenance_manual_required.id_for_label }}">{{ form.maintenance_manual_required.label }}</label>
                    </div>
                    {% if form.maintenance_manual_required.errors %}
                        <div class="form-errors">
                            {% for error in form.maintenance_manual_required.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Requirements and Limitations -->
        <div class="form-section">
            <h3>Requirements and Limitations</h3>
            <div class="form-row">
                <div class="form-group full-width">
                    <label for="{{ form.operational_limitations.id_for_label }}">{{ form.operational_limitations.label }}</label>
                    {{ form.operational_limitations }}
                    {% if form.operational_limitations.errors %}
                        <div class="form-errors">
                            {% for error in form.operational_limitations.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <small class="form-help">Describe any operational limitations and restrictions for this aircraft type</small>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.maintenance_requirements.id_for_label }}">{{ form.maintenance_requirements.label }}</label>
                    {{ form.maintenance_requirements }}
                    {% if form.maintenance_requirements.errors %}
                        <div class="form-errors">
                            {% for error in form.maintenance_requirements.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <small class="form-help">Maintenance schedules and requirements</small>
                </div>
                
                <div class="form-group">
                    <label for="{{ form.training_requirements.id_for_label }}">{{ form.training_requirements.label }}</label>
                    {{ form.training_requirements }}
                    {% if form.training_requirements.errors %}
                        <div class="form-errors">
                            {% for error in form.training_requirements.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <small class="form-help">Training requirements for operators</small>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group full-width">
                    <label for="{{ form.insurance_requirements.id_for_label }}">{{ form.insurance_requirements.label }}</label>
                    {{ form.insurance_requirements }}
                    {% if form.insurance_requirements.errors %}
                        <div class="form-errors">
                            {% for error in form.insurance_requirements.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <small class="form-help">Insurance coverage requirements and minimums</small>
                </div>
            </div>
        </div>

        <!-- Status -->
        <div class="form-section">
            <h3>Status</h3>
            <div class="form-row">
                <div class="form-group checkbox-group">
                    <div class="checkbox-container">
                        {{ form.is_active }}
                        <label for="{{ form.is_active.id_for_label }}">{{ form.is_active.label }}</label>
                    </div>
                    {% if form.is_active.errors %}
                        <div class="form-errors">
                            {% for error in form.is_active.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <small class="form-help">Aircraft type is active and available for selection</small>
                </div>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> {{ action }} Aircraft Type
            </button>
            <a href="{% url 'aircraft:aircraft_type_list' %}" class="btn btn-outline">
                <i class="fas fa-times"></i> Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}