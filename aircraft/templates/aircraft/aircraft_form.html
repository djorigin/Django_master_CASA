{% extends "aircraft/base.html" %}
{% load i18n %}

{% block title %}{{ action }} Aircraft - {{ block.super }}{% endblock %}

{% block breadcrumb_extra %}
<span>></span>
<a href="{% url 'aircraft:aircraft_list' %}">Aircraft Fleet</a>
<span>></span>
<span>{{ action }}</span>
{% endblock %}

{% block page_title %}{{ action }} Aircraft{% endblock %}
{% block page_subtitle %}
    {% if action == "Create" %}
        Add a new aircraft to the fleet
    {% else %}
        Update aircraft information
    {% endif %}
{% endblock %}

{% block page_actions %}
<a href="{% url 'aircraft:aircraft_list' %}" class="btn btn-outline">
    <i class="fas fa-arrow-left"></i> Back to Fleet
</a>
{% if action == "Update" %}
<a href="{% url 'aircraft:aircraft_detail' aircraft.pk %}" class="btn btn-secondary">
    <i class="fas fa-eye"></i> View Details
</a>
{% endif %}
{% endblock %}

{% block content %}
<div class="form-container">
    <form method="post" class="aircraft-form">
        {% csrf_token %}
        
        <!-- Basic Information -->
        <div class="form-section">
            <h3>Basic Information</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.aircraft_id.id_for_label }}">{{ form.aircraft_id.label }}*</label>
                    {{ form.aircraft_id }}
                    {% if form.aircraft_id.errors %}
                        <div class="form-errors">
                            {% for error in form.aircraft_id.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.aircraft_type.id_for_label }}">{{ form.aircraft_type.label }}*</label>
                    {{ form.aircraft_type }}
                    {% if form.aircraft_type.errors %}
                        <div class="form-errors">
                            {% for error in form.aircraft_type.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.status.id_for_label }}">{{ form.status.label }}*</label>
                    {{ form.status }}
                    {% if form.status.errors %}
                        <div class="form-errors">
                            {% for error in form.status.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.serial_number.id_for_label }}">{{ form.serial_number.label }}</label>
                    {{ form.serial_number }}
                    {% if form.serial_number.errors %}
                        <div class="form-errors">
                            {% for error in form.serial_number.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.registration_number.id_for_label }}">{{ form.registration_number.label }}</label>
                    {{ form.registration_number }}
                    {% if form.registration_number.errors %}
                        <div class="form-errors">
                            {% for error in form.registration_number.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.location.id_for_label }}">{{ form.location.label }}</label>
                    {{ form.location }}
                    {% if form.location.errors %}
                        <div class="form-errors">
                            {% for error in form.location.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Ownership Information -->
        <div class="form-section">
            <h3>Ownership Information</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.owner.id_for_label }}">{{ form.owner.label }}</label>
                    {{ form.owner }}
                    {% if form.owner.errors %}
                        <div class="form-errors">
                            {% for error in form.owner.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.operator.id_for_label }}">{{ form.operator.label }}</label>
                    {{ form.operator }}
                    {% if form.operator.errors %}
                        <div class="form-errors">
                            {% for error in form.operator.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.manufacture_date.id_for_label }}">{{ form.manufacture_date.label }}</label>
                    {{ form.manufacture_date }}
                    {% if form.manufacture_date.errors %}
                        <div class="form-errors">
                            {% for error in form.manufacture_date.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.acquisition_date.id_for_label }}">{{ form.acquisition_date.label }}</label>
                    {{ form.acquisition_date }}
                    {% if form.acquisition_date.errors %}
                        <div class="form-errors">
                            {% for error in form.acquisition_date.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Operational Data -->
        <div class="form-section">
            <h3>Operational Data</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.flight_hours.id_for_label }}">{{ form.flight_hours.label }}</label>
                    {{ form.flight_hours }}
                    {% if form.flight_hours.errors %}
                        <div class="form-errors">
                            {% for error in form.flight_hours.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.cycle_count.id_for_label }}">{{ form.cycle_count.label }}</label>
                    {{ form.cycle_count }}
                    {% if form.cycle_count.errors %}
                        <div class="form-errors">
                            {% for error in form.cycle_count.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Maintenance Information -->
        <div class="form-section">
            <h3>Maintenance Information</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.last_inspection_date.id_for_label }}">{{ form.last_inspection_date.label }}</label>
                    {{ form.last_inspection_date }}
                    {% if form.last_inspection_date.errors %}
                        <div class="form-errors">
                            {% for error in form.last_inspection_date.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.next_inspection_due.id_for_label }}">{{ form.next_inspection_due.label }}</label>
                    {{ form.next_inspection_due }}
                    {% if form.next_inspection_due.errors %}
                        <div class="form-errors">
                            {% for error in form.next_inspection_due.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group full-width">
                    <label for="{{ form.maintenance_notes.id_for_label }}">{{ form.maintenance_notes.label }}</label>
                    {{ form.maintenance_notes }}
                    {% if form.maintenance_notes.errors %}
                        <div class="form-errors">
                            {% for error in form.maintenance_notes.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Certification and Compliance -->
        <div class="form-section">
            <h3>Certification and Compliance</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.airworthiness_certificate.id_for_label }}">{{ form.airworthiness_certificate.label }}</label>
                    {{ form.airworthiness_certificate }}
                    {% if form.airworthiness_certificate.errors %}
                        <div class="form-errors">
                            {% for error in form.airworthiness_certificate.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.certificate_expiry_date.id_for_label }}">{{ form.certificate_expiry_date.label }}</label>
                    {{ form.certificate_expiry_date }}
                    {% if form.certificate_expiry_date.errors %}
                        <div class="form-errors">
                            {% for error in form.certificate_expiry_date.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.insurance_policy_number.id_for_label }}">{{ form.insurance_policy_number.label }}</label>
                    {{ form.insurance_policy_number }}
                    {% if form.insurance_policy_number.errors %}
                        <div class="form-errors">
                            {% for error in form.insurance_policy_number.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.insurance_expiry_date.id_for_label }}">{{ form.insurance_expiry_date.label }}</label>
                    {{ form.insurance_expiry_date }}
                    {% if form.insurance_expiry_date.errors %}
                        <div class="form-errors">
                            {% for error in form.insurance_expiry_date.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group full-width">
                    <label for="{{ form.operating_limitations.id_for_label }}">{{ form.operating_limitations.label }}</label>
                    {{ form.operating_limitations }}
                    {% if form.operating_limitations.errors %}
                        <div class="form-errors">
                            {% for error in form.operating_limitations.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Status -->
        <div class="form-section">
            <h3>Status</h3>
            <div class="form-row">
                <div class="form-group checkbox-group">
                    <div class="checkbox-container">
                        {{ form.is_active }}
                        <label for="{{ form.is_active.id_for_label }}">{{ form.is_active.label }}</label>
                    </div>
                    {% if form.is_active.errors %}
                        <div class="form-errors">
                            {% for error in form.is_active.errors %}
                                <span class="error">{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> {{ action }} Aircraft
            </button>
            <a href="{% url 'aircraft:aircraft_list' %}" class="btn btn-outline">
                <i class="fas fa-times"></i> Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}